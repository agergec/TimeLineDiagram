<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeline Diagram Editor - Help</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='48' fill='%232563eb'/><circle cx='50' cy='50' r='42' fill='%23fff'/><circle cx='50' cy='50' r='4' fill='%232563eb'/><line x1='50' y1='50' x2='50' y2='20' stroke='%232563eb' stroke-width='3' stroke-linecap='round'/><line x1='50' y1='50' x2='18' y2='51' stroke='%232563eb' stroke-width='4' stroke-linecap='round'/><circle cx='50' cy='14' r='3' fill='%232563eb'/><circle cx='86' cy='50' r='3' fill='%232563eb'/><circle cx='50' cy='86' r='3' fill='%232563eb'/><circle cx='14' cy='50' r='3' fill='%232563eb'/></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f1419;
            --bg-secondary: #1a1f2e;
            --bg-tertiary: #252b3b;
            --bg-card: rgba(30, 37, 52, 0.9);
            --text-primary: #ffffff;
            --text-secondary: #a8b2c1;
            --text-muted: #6b7280;
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --border-color: rgba(255, 255, 255, 0.1);
            --success: #10b981;
            --warning: #f59e0b;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
        }

        .nav-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 240px;
            height: 100vh;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 24px 16px;
            overflow-y: auto;
            z-index: 100;
        }

        .nav-back-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            padding: 8px 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            transition: all 0.2s;
        }

        .nav-back-link:hover {
            background: var(--bg-tertiary);
        }

        .nav-sidebar h3 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 16px;
            font-weight: 600;
        }

        .nav-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-list li {
            margin-bottom: 4px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .nav-link:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .nav-link.active {
            background: var(--accent-primary);
            color: white;
        }

        .nav-icon {
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .container {
            max-width: 900px;
            margin-left: 260px;
            padding: 40px 24px 80px;
            flex: 1;
        }

        header {
            text-align: center;
            margin-bottom: 48px;
            padding-bottom: 32px;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 24px;
            transition: opacity 0.2s;
        }

        .back-link:hover {
            opacity: 0.8;
        }

        section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 24px;
        }

        h2 {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        h2 .icon {
            font-size: 1.5rem;
        }

        h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 20px 0 12px;
        }

        p {
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        ul, ol {
            color: var(--text-secondary);
            margin-left: 24px;
            margin-bottom: 16px;
        }

        li {
            margin-bottom: 8px;
        }

        .step-list {
            list-style: none;
            margin-left: 0;
            counter-reset: step;
        }

        .step-list li {
            counter-increment: step;
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            padding: 16px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            align-items: flex-start;
        }

        .step-list li::before {
            content: counter(step);
            min-width: 28px;
            height: 28px;
            background: var(--accent-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-content strong {
            color: var(--text-primary);
            display: block;
            margin-bottom: 4px;
        }

        .kbd {
            display: inline-block;
            padding: 2px 8px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 12px;
            color: var(--text-primary);
        }

        .tip {
            background: rgba(99, 102, 241, 0.1);
            border-left: 3px solid var(--accent-primary);
            padding: 16px;
            border-radius: 0 8px 8px 0;
            margin: 16px 0;
        }

        .tip-title {
            color: var(--accent-primary);
            font-weight: 600;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tip p {
            margin-bottom: 0;
            color: var(--text-secondary);
        }

        .warning {
            background: rgba(245, 158, 11, 0.1);
            border-left: 3px solid var(--warning);
        }

        .warning .tip-title {
            color: var(--warning);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .feature-card {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .feature-card .icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .feature-card h4 {
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .feature-card p {
            font-size: 13px;
            margin-bottom: 0;
        }

        .shortcut-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        .shortcut-table th,
        .shortcut-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .shortcut-table th {
            color: var(--text-muted);
            font-weight: 500;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .shortcut-table td:first-child {
            color: var(--text-primary);
        }

        .shortcut-table td:last-child {
            color: var(--text-secondary);
        }

        .cta-section {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(139, 92, 246, 0.2) 100%);
        }

        .cta-section h2 {
            justify-content: center;
            margin-bottom: 16px;
        }

        .cta-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
        }

        footer {
            text-align: center;
            padding: 32px;
            color: var(--text-muted);
            font-size: 13px;
        }

        footer a {
            color: var(--accent-primary);
            text-decoration: none;
        }

        @media (max-width: 768px) {
            .nav-sidebar {
                display: none;
            }
            .container {
                margin-left: 0;
                padding: 24px 16px 60px;
            }

            h1 {
                font-size: 1.8rem;
            }

            section {
                padding: 20px;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation Sidebar -->
    <nav class="nav-sidebar">
        <a href="index.html" class="nav-back-link">‚Üê Back to Editor</a>
        <h3>Contents</h3>
        <ul class="nav-list">
            <li><a href="#quick-start" class="nav-link"><span class="nav-icon">üöÄ</span> Quick Start</a></li>
            <li><a href="#features" class="nav-link"><span class="nav-icon">‚ú®</span> Features</a></li>
            <li><a href="#lanes" class="nav-link"><span class="nav-icon">üìä</span> Lanes</a></li>
            <li><a href="#boxes" class="nav-link"><span class="nav-icon">üì¶</span> Boxes</a></li>
            <li><a href="#zoom-navigation" class="nav-link"><span class="nav-icon">üîç</span> Zoom & Navigation</a></li>
            <li><a href="#compression" class="nav-link"><span class="nav-icon">‚áÑ</span> Gap Compression</a></li>
            <li><a href="#measurement" class="nav-link"><span class="nav-icon">üìè</span> Measurement Tool</a></li>
            <li><a href="#minimap" class="nav-link"><span class="nav-icon">üó∫Ô∏è</span> Minimap</a></li>
            <li><a href="#sip-parser" class="nav-link"><span class="nav-icon">üìû</span> SIP Log Parser</a></li>
            <li><a href="#auto-save" class="nav-link"><span class="nav-icon">üíæ</span> Auto-Save</a></li>
            <li><a href="#sharing-export" class="nav-link"><span class="nav-icon">üîó</span> Sharing & Export</a></li>
            <li><a href="#theme" class="nav-link"><span class="nav-icon">üé®</span> Theme</a></li>
            <li><a href="#alignment" class="nav-link"><span class="nav-icon">üìê</span> Alignment Lines</a></li>
            <li><a href="#settings" class="nav-link"><span class="nav-icon">‚öôÔ∏è</span> Settings</a></li>
            <li><a href="#keyboard" class="nav-link"><span class="nav-icon">‚å®Ô∏è</span> Keyboard Shortcuts</a></li>
        </ul>
    </nav>

    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Editor</a>

        <header>
            <h1>Timeline Diagram Editor</h1>
            <p class="subtitle">Visualize processes, API calls, SIP flows, and sequences with precision timing</p>
        </header>

        <!-- Quick Start -->
        <section id="quick-start">
            <h2><span class="icon">üöÄ</span> Quick Start</h2>
            <p>Create your first diagram in four steps:</p>

            <ol class="step-list">
                <li>
                    <div class="step-content">
                        <strong>Add Lanes</strong>
                        Click <kbd class="kbd">+ Add</kbd> in the toolbar. Each lane represents a component, service, or actor.
                    </div>
                </li>
                <li>
                    <div class="step-content">
                        <strong>Create Boxes</strong>
                        Click and drag on any lane track. The horizontal distance determines the duration.
                    </div>
                </li>
                <li>
                    <div class="step-content">
                        <strong>Edit Properties</strong>
                        Click a box to open the properties panel. Set the label, color, start time, and duration.
                    </div>
                </li>
                <li>
                    <div class="step-content">
                        <strong>Share or Export</strong>
                        Click <kbd class="kbd">Share</kbd> to copy a URL, or export as PNG/SVG.
                    </div>
                </li>
            </ol>
        </section>

        <!-- Features Overview -->
        <section id="features">
            <h2><span class="icon">‚ú®</span> Features</h2>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="icon">‚áÑ</div>
                    <h4>Gap Compression</h4>
                    <p>Compress empty gaps to focus on activity periods</p>
                </div>
                <div class="feature-card">
                    <div class="icon">üìè</div>
                    <h4>Measurement Tool</h4>
                    <p>Measure time distances with snapping and pinning</p>
                </div>
                <div class="feature-card">
                    <div class="icon">üó∫Ô∏è</div>
                    <h4>Minimap</h4>
                    <p>Navigate large diagrams with a draggable overview</p>
                </div>
                <div class="feature-card">
                    <div class="icon">üìû</div>
                    <h4>SIP Parser</h4>
                    <p>Import SIP call flow logs directly into diagrams</p>
                </div>
                <div class="feature-card">
                    <div class="icon">üîó</div>
                    <h4>URL Sharing</h4>
                    <p>Share diagrams instantly with a single link</p>
                </div>
                <div class="feature-card">
                    <div class="icon">üîç</div>
                    <h4>Unlimited Zoom</h4>
                    <p>Zoom from minutes down to microseconds</p>
                </div>
            </div>
        </section>

        <!-- Lanes -->
        <section id="lanes">
            <h2><span class="icon">üìä</span> Lanes</h2>

            <h3>Adding Lanes</h3>
            <p>Click <kbd class="kbd">+ Add</kbd> in the sidebar to create a new lane. Lanes represent components in your system: services, users, databases, or any logical grouping.</p>

            <h3>Editing Lane Names</h3>
            <p>Double-click the lane name in the sidebar list to edit it inline. Press <kbd class="kbd">Enter</kbd> to apply or click outside to cancel. Lane names support multiple lines. You can also edit the name in the right sidebar Lane Properties panel.</p>

            <h3>Reordering Lanes</h3>
            <p>Click a lane in the sidebar to expand its controls. Use the up/down arrows (‚Üë ‚Üì) to reorder, or drag by the handle (‚ãÆ‚ãÆ).</p>

            <h3>Inserting Lanes</h3>
            <p>Use the insert buttons (+‚Üë and +‚Üì) to add a new lane above or below an existing lane.</p>

            <h3>Lane Colors</h3>
            <p>Click the colored square next to a lane name to open the color picker. Boxes in that lane use variations of this base color.</p>

            <h3>Deleting Lanes</h3>
            <p>Click the √ó button on a lane to delete it. A confirmation dialog appears showing how many boxes will be removed.</p>
        </section>

        <!-- Boxes -->
        <section id="boxes">
            <h2><span class="icon">üì¶</span> Boxes</h2>

            <h3>Creating Boxes</h3>
            <p>Click and drag horizontally on any lane track. Drag left-to-right or right-to-left; the leftmost point becomes the start time.</p>

            <h3>Selecting Boxes</h3>
            <p>Click a box to select it. The properties panel opens showing all editable fields.</p>

            <h3>Moving Boxes</h3>
            <p>Drag a selected box horizontally to change its start time. The box remains in its lane.</p>

            <h3>Resizing Boxes</h3>
            <p>Hover over the left or right edge of a box until the resize cursor appears. Drag to adjust the start time (left edge) or duration (right edge).</p>

            <h3>Box Properties</h3>
            <table class="shortcut-table">
                <tr>
                    <th>Property</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>Label</td>
                    <td>Text displayed inside the box. Shows as tooltip when box is too narrow.</td>
                </tr>
                <tr>
                    <td>Color</td>
                    <td>Box color. Click palette colors or use the color picker.</td>
                </tr>
                <tr>
                    <td>Start Time</td>
                    <td>Offset from diagram start time in milliseconds.</td>
                </tr>
                <tr>
                    <td>Duration</td>
                    <td>Box length in milliseconds.</td>
                </tr>
            </table>

            <h3>Pick Mode</h3>
            <p>Click the üìç button next to Start Time in the properties panel to enter pick mode. Click any box to set the start time to that box's end time. This creates sequential activities.</p>

            <h3>Deleting Boxes</h3>
            <p>Select a box and press <kbd class="kbd">Delete</kbd> or <kbd class="kbd">Backspace</kbd>. Alternatively, click the delete button in the properties panel.</p>
        </section>

        <!-- Zoom & Navigation -->
        <section id="zoom-navigation">
            <h2><span class="icon">üîç</span> Zoom & Navigation</h2>

            <h3>Zoom Controls</h3>
            <p>Located in the top toolbar:</p>
            <ul>
                <li><kbd class="kbd">‚àí</kbd> Zoom out (wider time range)</li>
                <li><kbd class="kbd">+</kbd> Zoom in (narrower time range, more detail)</li>
                <li><strong>Click the % label</strong> to reset zoom to 100%</li>
                <li><kbd class="kbd">Fit</kbd> Automatically fit the entire diagram in view</li>
                <li><kbd class="kbd">‚áÑ</kbd> Toggle gap compression (in the zoom group)</li>
            </ul>

            <h3>Zoom Range</h3>
            <p>Zoom from 1% to 666,666%. At high zoom levels, the ruler displays microseconds (Œºs) and nanoseconds (ns) for sub-millisecond precision.</p>

            <h3>Scrolling</h3>
            <p>Scroll horizontally to navigate the timeline. The ruler, lanes, and time markers scroll together in sync.</p>

            <h3>Viewport Centering</h3>
            <p>When zooming, the viewport stays centered on the visible content. This maintains your focus point during zoom operations.</p>
        </section>

        <!-- Gap Compression -->
        <section id="compression">
            <h2><span class="icon">‚áÑ</span> Gap Compression</h2>

            <h3>What It Does</h3>
            <p>Gap compression removes empty time periods where no boxes exist across all lanes. This brings activity periods closer together, making the diagram more compact and readable.</p>

            <h3>Enabling Compression</h3>
            <p>Click the <kbd class="kbd">‚áÑ</kbd> button in the top toolbar (next to zoom controls). The button highlights when compression is active.</p>

            <h3>How It Works</h3>
            <ul>
                <li>Gaps larger than the compression threshold (default: 500ms) are compressed</li>
                <li>Compressed gaps are marked with orange striped indicators showing how much time was hidden</li>
                <li>Boxes maintain their relative positions and actual durations</li>
            </ul>

            <h3>Ruler Display (Hybrid Mode)</h3>
            <p>The time ruler shows actual time values at compressed positions. Break markers (‚âã) indicate where gaps were compressed. Hover over a break marker to see the original time range.</p>

            <h3>Measurement in Compressed Mode</h3>
            <p>The measurement tool displays actual time values, not compressed values. Measuring between two points shows the real time difference including any compressed gaps.</p>

            <h3>Compression Threshold</h3>
            <p>Open Settings (‚öôÔ∏è) and adjust the "Gap Compression Threshold" slider. Gaps smaller than this value remain uncompressed.</p>
        </section>

        <!-- Measurement Tool -->
        <section id="measurement">
            <h2><span class="icon">üìè</span> Measurement Tool</h2>

            <h3>Activating the Tool</h3>
            <p>Two methods:</p>
            <ul>
                <li>Hold <kbd class="kbd">Cmd</kbd> (Mac) or <kbd class="kbd">Ctrl</kbd> (Windows/Linux) and click-drag on the canvas</li>
                <li>Click the üìè button in the toolbar to toggle measurement mode, then click-drag</li>
            </ul>

            <h3>Measuring</h3>
            <p>Click and drag between two points. A green line with arrow markers shows the measurement. The toolbar bar displays:</p>
            <ul>
                <li><strong>Duration</strong>: Time difference between the two points</li>
                <li><strong>S (Start)</strong>: Time offset of the start point</li>
                <li><strong>E (End)</strong>: Time offset of the end point</li>
            </ul>

            <h3>Snapping</h3>
            <p>The measurement endpoints snap to box edges within 8 pixels. This enables precise measurements between box start/end points.</p>

            <h3>Pinning Measurements</h3>
            <p>Click the üìå button in the toolbar measurement bar to pin the measurement. Pinned measurements:</p>
            <ul>
                <li>Stay visible until unpinned or closed</li>
                <li>Display a glowing green border</li>
                <li>Are included in PNG and SVG exports</li>
            </ul>

            <h3>Closing Measurements</h3>
            <p>Press <kbd class="kbd">Escape</kbd> or click elsewhere to dismiss. Unpinned measurements fade after 2 seconds.</p>
        </section>

        <!-- Minimap -->
        <section id="minimap">
            <h2><span class="icon">üó∫Ô∏è</span> Minimap</h2>

            <h3>Location</h3>
            <p>The minimap appears in the footer area below the lanes canvas.</p>

            <h3>What It Shows</h3>
            <p>A compressed overview of all boxes in the diagram. Each box appears as a colored rectangle. The viewport indicator (highlighted rectangle) shows the currently visible portion of the timeline.</p>

            <h3>Click Navigation</h3>
            <p>Click anywhere on the minimap to jump to that position in the timeline.</p>

            <h3>Drag Navigation</h3>
            <p>Drag the viewport indicator left or right to scroll through the timeline. This provides smooth navigation for large diagrams.</p>

            <h3>Compression Indicators</h3>
            <p>When gap compression is enabled, the minimap shows orange markers at compressed gap positions.</p>
        </section>

        <!-- SIP Log Parser -->
        <section id="sip-parser">
            <h2><span class="icon">üìû</span> SIP Log Parser</h2>

            <h3>Accessing the Parser</h3>
            <p>Click the <kbd class="kbd">SIP Parser</kbd> link in the toolbar to open the SIP Log Parser page.</p>

            <h3>Supported Log Formats</h3>
            <p>The parser recognizes three types of log entries:</p>
            <ul>
                <li><strong>SIP Messages</strong>: Lines containing "Outgoing SIP" or "Incoming SIP" with method names (INVITE, BYE, etc.)</li>
                <li><strong>Events</strong>: Lines starting with "Event*" (outgoing direction)</li>
                <li><strong>Requests</strong>: Lines starting with "Request*" (incoming direction)</li>
            </ul>

            <h3>Parsing Process</h3>
            <ol>
                <li>Paste your SIP log into the text area</li>
                <li>Click <kbd class="kbd">Parse Logs</kbd></li>
                <li>The grid displays all parsed messages with timestamp, type, direction, CID, method, from/to headers</li>
                <li>Delta time between messages with the same reference ID is calculated automatically</li>
            </ol>

            <h3>Filtering</h3>
            <ul>
                <li><strong>Toggle SIP</strong>: Show or hide SIP messages</li>
                <li><strong>Toggle Events/Requests</strong>: Show or hide Event and Request entries</li>
                <li><strong>CID Filters</strong>: Click individual CID buttons to show only specific call IDs</li>
            </ul>

            <h3>Generating Diagrams</h3>
            <p>Click <kbd class="kbd">Generate Diagram</kbd> to create a timeline diagram from the filtered messages. Each unique CID becomes a separate lane. The lane name includes the CID and from/to header values.</p>
        </section>

        <!-- Auto-Save -->
        <section id="auto-save">
            <h2><span class="icon">üíæ</span> Auto-Save & My Diagrams</h2>

            <h3>Automatic Saving</h3>
            <p>Changes save automatically to browser local storage within 1 second. Refreshing the page or closing the browser preserves your work.</p>

            <h3>My Diagrams Modal</h3>
            <p>Click the <kbd class="kbd">üìÅ Diagrams</kbd> button in the toolbar to open the diagrams modal. Actions:</p>
            <ul>
                <li><strong>Click diagram name</strong>: Load that diagram</li>
                <li><strong>+ New Diagram</strong>: Create a blank diagram</li>
                <li><strong>üîí Lock</strong>: Protect from edits and purging</li>
                <li><strong>√ó Delete</strong>: Click the red √ó to remove the diagram</li>
                <li><strong>Purge</strong>: Button in modal footer to remove all unlocked diagrams</li>
            </ul>

            <h3>Locking Diagrams</h3>
            <p>Locked diagrams cannot be edited, reset, or deleted. The lock icon (üîí) appears next to locked diagram titles. Locked diagrams survive the purge operation.</p>

            <h3>Storage Limit</h3>
            <p>The 10 most recent diagrams are kept. Older unlocked diagrams may be automatically removed when the limit is reached.</p>
        </section>

        <!-- Sharing & Export -->
        <section id="sharing-export">
            <h2><span class="icon">üîó</span> Sharing & Export</h2>

            <h3>URL Sharing</h3>
            <p>Click <kbd class="kbd">Share</kbd> to copy a URL containing the entire diagram. Recipients can view and edit their own copy. The shared diagram saves to their "My Diagrams" list automatically.</p>

            <div class="tip warning">
                <div class="tip-title">‚ö†Ô∏è URL Length Limits</div>
                <p>Large diagrams may exceed browser URL limits. Use Save/Load for complex diagrams.</p>
            </div>

            <h3>Save & Load (JSON)</h3>
            <ul>
                <li><kbd class="kbd">Save</kbd>: Download the diagram as a JSON file</li>
                <li><kbd class="kbd">Load</kbd>: Import a saved JSON file as a new diagram</li>
            </ul>
            <p>Loading always creates a new diagram; existing work is never overwritten.</p>

            <h3>Export as Image</h3>
            <ul>
                <li><kbd class="kbd">PNG</kbd>: High-quality raster image</li>
                <li><kbd class="kbd">SVG</kbd>: Scalable vector image</li>
            </ul>
            <p>Exports include the title, all lanes, boxes, time markers, and any pinned measurements.</p>
        </section>

        <!-- Theme -->
        <section id="theme">
            <h2><span class="icon">üé®</span> Theme</h2>

            <h3>Dark / Light Toggle</h3>
            <p>Click the <kbd class="kbd">‚òΩ</kbd> button in the toolbar to switch between dark and light themes. The preference is saved to browser storage and persists across sessions.</p>

            <h3>Scope</h3>
            <p>The theme applies globally to the entire application, including the header, toolbar, sidebar, canvas, and all modals.</p>
        </section>

        <!-- Alignment Lines -->
        <section id="alignment">
            <h2><span class="icon">üìê</span> Alignment Lines</h2>

            <h3>What They Are</h3>
            <p>Vertical dashed lines rendered as an SVG overlay on the canvas. They appear at the start and end times of each box, making it easy to see temporal alignment across lanes.</p>

            <h3>Lane Colors</h3>
            <p>Each alignment line uses the color of the lane it belongs to, so you can identify which lane an alignment originates from at a glance.</p>

            <h3>Toggling</h3>
            <p>Open Settings (<kbd class="kbd">‚öôÔ∏è</kbd>) and toggle "Show Vertical Alignment Lines" on or off.</p>
        </section>

        <!-- Settings -->
        <section id="settings">
            <h2><span class="icon">‚öôÔ∏è</span> Settings</h2>
            <p>Click the <kbd class="kbd">‚öôÔ∏è</kbd> button in the toolbar to open the settings panel in the right sidebar:</p>

            <table class="shortcut-table">
                <tr>
                    <th>Setting</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>Page Title</td>
                    <td>Diagram title shown in header and exports</td>
                </tr>
                <tr>
                    <td>Time Format Threshold</td>
                    <td>Millisecond threshold for switching to seconds/minutes display</td>
                </tr>
                <tr>
                    <td>Show Alignment Lines</td>
                    <td>Vertical dashed lines at box start/end times</td>
                </tr>
                <tr>
                    <td>Show Box Labels</td>
                    <td>Persistent labels above narrow boxes</td>
                </tr>
                <tr>
                    <td>Compact View</td>
                    <td>Hide left lane labels to maximize canvas space</td>
                </tr>
                <tr>
                    <td>Timeline Duration</td>
                    <td>Total canvas width in milliseconds (cannot be less than last box end)</td>
                </tr>
                <tr>
                    <td>Auto-Open Box Properties</td>
                    <td>Open properties panel when creating new boxes</td>
                </tr>
                <tr>
                    <td>Trailing Space</td>
                    <td>Extra timeline space after the last box (in milliseconds)</td>
                </tr>
                <tr>
                    <td>Gap Compression Threshold</td>
                    <td>Minimum gap size to compress (in milliseconds)</td>
                </tr>
                <tr>
                    <td>Purge Application</td>
                    <td>Delete all unlocked diagrams and reset settings</td>
                </tr>
            </table>
        </section>

        <!-- Keyboard Shortcuts -->
        <section id="keyboard">
            <h2><span class="icon">‚å®Ô∏è</span> Keyboard Shortcuts</h2>

            <table class="shortcut-table">
                <tr>
                    <th>Shortcut</th>
                    <th>Action</th>
                </tr>
                <tr>
                    <td><span class="kbd">Cmd</span>/<span class="kbd">Ctrl</span> + Click + Drag</td>
                    <td>Activate measurement tool</td>
                </tr>
                <tr>
                    <td><span class="kbd">Delete</span> / <span class="kbd">Backspace</span></td>
                    <td>Delete selected box</td>
                </tr>
                <tr>
                    <td><span class="kbd">Escape</span></td>
                    <td>Deselect box, cancel measurement, close properties pane / sidebar</td>
                </tr>
                <tr>
                    <td><span class="kbd">Enter</span></td>
                    <td>Apply and exit text field editing</td>
                </tr>
            </table>
        </section>

        <!-- CTA -->
        <section class="cta-section">
            <h2>Ready to Create?</h2>
            <p style="margin-bottom: 24px;">Start building your timeline diagram now.</p>
            <a href="index.html" class="cta-btn">
                Open Editor ‚Üí
            </a>
        </section>

        <footer>
            <p>Made by UCS</p>
            <p style="margin-top: 8px;">
                <a href="index.html">Editor</a> ¬∑
                <a href="sip-parser.html">SIP Parser</a> ¬∑
                <a href="help.html">Help</a>
            </p>
        </footer>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                }
            });
        });

        // Highlight active section on scroll
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-link');

        function highlightNav() {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (window.pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', highlightNav);
        highlightNav();
    </script>
</body>

</html>
